{"version":3,"sources":["uni-app:///main.js","webpack:///D:/UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue?a642","webpack:///D:/UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue?44a5","webpack:///D:/UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue?f45f","webpack:///D:/UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue?ae95","uni-app:///pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue","webpack:///D:/UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue?9ece","webpack:///D:/UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue?9b38"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,8I;AACAA,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACqL;AACrL,gBAAgB,sLAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAmsB,CAAgB,mqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmGvtB;AACA,kI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,kBADA,EACA;AACA,iCAFA,EAGA,YAHA,EAGA;AACA,uBAJA,EAIA;AACA,kBACA,UADA,IAEA,EACA,WADA,EAFA,CALA,EAUA,aAVA,EAUA;AACA,qBAXA,EAWA;AACA,sBAZA,EAYA;AACA,oBAbA,EAaA;AACA,mBAdA,EAcA;AACA,uBAfA,EAeA;AACA,uBAhBA,EAgBA;AACA,oBAjBA,EAiBA;AACA,mBAlBA,EAkBA;AACA,sBAnBA,EAmBA;AACA,wBApBA,EAoBA;AACA,yBArBA,EAqBA;AACA,4BAtBA,EAsBA;AACA,qBAvBA,EAuBA;AACA,qBAxBA,EAwBA;AACA,eAzBA,EAyBA;AACA,wBA1BA,EA0BA;AACA,kBA3BA,EA2BA;AACA,oBA5BA,EA6BA,uBA7BA,EA6BA;AACA,2BA9BA,EA8BA;AACA,oBA/BA,EA+BA;AACA,oBAhCA,EAiCA,gBAjCA,GAmCA,CArCA,EAsCA,gCACA;AACA,oBACA,0CAHA,CAIA;AACA,0DALA,CAMA;AACA,yDAPA,CAQA;AACA,kDAEA,kBACA,gBADA,IAIA,6CAfA,CAeA;AACA,qDAhBA,CAgBA;AACA,2CACA,sBACA,wBACA,CAHA,MAGA,CACA,oBACA,yBACA,CAvBA,CAwBA;AACA,yBAzBA,CA0BA;AACA,uBAEA,CAnEA,EAoEA,MApEA,oBAoEA,CAEA,CAtEA,EAuEA,QAvEA,sBAuEA,CACA,0BACA,CAzEA,EA0EA;AACA,aA3EA,uBA2EA,OA3EA,EA2EA,CACA,gBADA,CAEA;AACA,8BACA,mCACA;AACA,uBACA,0BACA,CACA,CACA,CArFA,EAsFA,WACA;AACA,iBAFA,2BAEA,CACA,gBADA,CAEA;AACA,uBACA,iBADA,EAEA,iCACA,2BACA,oCACA,CALA,EAMA,IANA,kBAMA,CACA,gBACA,eADA,EAEA,YAFA,IAIA,CAXA,IAaA,CAlBA,EAmBA;AACA,eApBA,yBAoBA,CACA,gBADA,CAEA;AACA,uBACA,eADA,EAEA,iCACA,0BAEA,yCAHA,CAKA;AACA,kCACA,CATA,IAWA,CAlCA,EAoCA;AACA,YArCA,oBAqCA,IArCA,EAqCA,CACA,WACA,qCACA,eACA,CACA,CA1CA,EA2CA;AACA,oBA5CA,8BA4CA,CACA,gBADA,CAEA;AACA,uBACA,oBADA,EAEA,iCACA,+BACA,oCACA,qDACA,cACA;AACA;AACA,eAFA,MAEA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAFA,MAEA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;;;AAGA,SAxCA;AAyCA,YAzCA,kBAyCA;AACA;AACA,2BADA;AAEA,wBAFA;;AAIA,SA9CA;;AAgDA,KA/FA;AAgGA;AACA,aAjGA,uBAiGA;AACA;AACA;AACA,+BADA;AAEA;AACA;AACA;AACA;AACA,SANA;AAOA;AACA;AACA;AACA,SAVA;;AAYA,KA/GA;AAgHA;AACA,QAjHA,gBAiHA,CAjHA,EAiHA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAvHA;;AAyHA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAhIA;;AAkIA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA,OAFA;;AAIA;AACA;AACA;AACA;AACA,KA/IA;AAgJA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;;;;;;;;AAQA;;AAEA;AACA;AACA,wDADA;AAEA,8DAFA;AAGA;;AAEA;AACA,kCADA;AAEA,wCAFA,EAEA;AACA,4CAHA,EAGA;AACA,gDAJA,EAIA;;AAEA,iEANA,EAMA;AACA,6DAPA,EAOA;AACA,iDARA,EAQA;AACA,6CATA,EASA;AACA,mDAVA,EAUA;AACA,gDAXA,EAWA;AACA,yCAZA,EAYA;AACA,6BAbA,EAaA;AACA,yCAdA,EAcA;AACA,6CAfA,EAeA;;AAEA,mCAjBA,EAiBA;AACA,sCAlBA,EAkBA;AACA,wCAnBA,EAmBA;AACA,wCApBA,EAoBA;AACA,mCArBA,EAqBA;AACA,wBAtBA,EAsBA;AACA,qCAvBA,EAuBA;AACA,0BAxBA,EAwBA;;AAEA,8CA1BA,EA0BA;AACA,6CA3BA,CA2BA;AA3BA,SALA;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,qCADA;AAEA,iCAFA;AAGA;AACA;AACA;AACA;AACA,iBAPA;;AASA,aAXA,MAWA;AACA;AACA;AACA,6BADA;AAEA,4BAFA;;AAIA;AACA;AACA,SA7DA;AA8DA,YA9DA,gBA8DA,GA9DA,EA8DA;AACA;AACA;AACA,SAjEA;;AAmEA,KA1OA;AA2OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEADA;AAEA,0EAFA;AAGA;AACA;AACA;AACA,oCAFA,EAJA;;AAQA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,gCAFA;;AAIA,iBANA,MAMA;AACA;AACA;AACA;AACA,yCADA;AAEA,2BAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA,qBANA;;AAQA;AACA,eAvBA,MAuBA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,8BAFA;;AAIA;AACA;AACA,WA7CA;AA8CA,cA9CA,gBA8CA,GA9CA,EA8CA;AACA;AACA;AACA;AACA;AACA,WAnDA;;AAqDA,OAtDA,EAsDA,IAtDA;AAuDA,KAxSA;;AA0SA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA,yBADA;AAEA,mDAFA;AAGA,iDAHA;AAIA,+CAJA;AAKA,iDALA;AAMA,+CANA;AAOA,eAPA,mBAOA,GAPA,EAOA;AACA;AACA;AACA;AACA,2BADA;AAEA,0BAFA;;AAIA;AACA,6BADA;;AAGA;AACA;AACA,aAFA,EAEA,IAFA;AAGA,WAXA,MAWA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA,WAJA,MAIA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA;AACA,SA7BA;AA8BA,YA9BA,gBA8BA,GA9BA,EA8BA;AACA;AACA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA,WAJA,MAIA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA,WAJA,MAIA;AACA;AACA;AACA,SA3CA;;;AA8CA,KAhcA;AAicA;AACA;AACA,kBADA;AAEA,kBAFA;;AAIA,KAtcA;AAucA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;;AAGA;AACA;AACA,oEADA;AAEA,0EAFA;AAGA;AACA;AACA,oCADA,EAJA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,4BAFA;;AAIA;AACA,uCADA;;AAGA;AACA,WApBA;AAqBA,cArBA,gBAqBA,GArBA,EAqBA;AACA;AACA;AACA;AACA,WAzBA;;AA2BA,OA5BA,EA4BA,IA5BA;AA6BA,KA5eA,EAtFA,E;;;;;;;;;;;;;ACrGA;AAAA;AAAA;AAAA;AAAgxC,CAAgB,ipCAAG,EAAC,C;;;;;;;;;;;ACApyC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./orderPayment.vue?vue&type=template&id=433d32dc&\"\nvar renderjs\nimport script from \"./orderPayment.vue?vue&type=script&lang=js&\"\nexport * from \"./orderPayment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderPayment.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"UAD/zhcx/pages_CTKY/pages/CTKY/TraditionSpecial/PayMent/orderPayment.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPayment.vue?vue&type=template&id=433d32dc&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.turnDate(_vm.orderInfo.setTime)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPayment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPayment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 订单支付页面 -->\r\n\t<view>\r\n\t\t<!-- <view style=\"color: #000000; font-size: 26upx; position: absolute; right: 32upx; z-index: 1; top: 24upx;\">倒计时：{{countDownDate}}秒</view> -->\r\n\t\t<view class=\"cover-container\">\r\n\t\t\t<view class=\"MP_information1\">\r\n\t\t\t\t<view class=\"MP_title\">{{orderInfo.startStaion}} - {{orderInfo.endStation}}</view>\r\n\t\t\t\t<text class=\"MP_text\">费用包含：车票 {{insurance}}</text>\r\n\r\n\t\t\t\t<view class=\"MP_selectionDate\">\r\n\t\t\t\t\t<view class=\"MP_title\">使用时间</view>\r\n\t\t\t\t\t<text class=\"MP_text\">{{turnDate(orderInfo.setTime)}} &nbsp; 仅限当天</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"MP_selectionDate\" :hidden=\"hiddenValues==0\">\r\n\t\t\t\t\t<view class=\"MP_title\">购票人信息</view>\r\n\t\t\t\t\t<view class=\"MP_userInformation\" v-for=\"(item,index) in passengerInfo\" :key=\"index\">\r\n\t\t\t\t\t\t<text>{{item.userName}}</text>\r\n\t\t\t\t\t\t<text class=\"Mp_sex\">{{item.userSex}}</text>\r\n\t\t\t\t\t\t<text class=\"Mp_square\">{{item.userType}}</text>\r\n\t\t\t\t\t\t<text class=\"Mp_square\" v-if=\"item.userDefault == true\">本人</text>\r\n\t\t\t\t\t\t<text class=\"Mp_square\" v-if=\"item.userEmergencyContact == true\">紧急联系人</text>\r\n\t\t\t\t\t\t<text class=\"Mp_text\">身份证：{{item.userCodeNum}}</text>\r\n\t\t\t\t\t\t<text class=\"Mp_text\">手机号：{{item.userPhoneNum}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"MP_selectionDate\" :hidden=\"hiddenValues==0\">\r\n\t\t\t\t\t<view class=\"MP_title\">费用详情</view>\r\n\t\t\t\t\t<view class=\"MP_cost\" v-if=\"adultNum>=1\">\r\n\t\t\t\t\t\t<text>成人票</text>\r\n\t\t\t\t\t\t<text class=\"MP_number\">×{{adultNum}}</text>\r\n\t\t\t\t\t\t<text class=\"MP_userCost\">¥{{orderInfo.fare}}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"MP_cost\" v-if=\"childrenNum>=1\">\r\n\t\t\t\t\t\t<text>儿童票</text>\r\n\t\t\t\t\t\t<text class=\"MP_number\">×{{childrenNum}}</text>\r\n\t\t\t\t\t\t<text class=\"MP_userCost\">¥{{orderInfo.halfTicket}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"MP_cost\" v-if=\"freeTicketNum>=1\">\r\n\t\t\t\t\t\t<text>携带免童票</text>\r\n\t\t\t\t\t\t<text class=\"MP_number\">×{{freeTicketNum}}</text>\r\n\t\t\t\t\t\t<text class=\"MP_userCost\">¥{{orderInfo.halfTicket}}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 保险 -->\r\n\t\t\t\t\t<view class=\"MP_cost\" v-if=\"isInsurance == 1 \">\r\n\t\t\t\t\t\t<text>保险</text>\r\n\t\t\t\t\t\t<text class=\"MP_number\">×{{ticketNum}}</text>\r\n\t\t\t\t\t\t<text class=\"MP_total\">¥{{insuredPrice}}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 优惠券 -->\r\n\t\t\t\t\t<!-- <view class=\"MP_cost\" v-if=\"orderInfo[0].couponPrice>0\" v-if=\"false\">\r\n\t\t\t\t\t\t<text>{{orderInfo[0].couponTitle}}</text>\r\n\t\t\t\t\t\t<text class=\"MP_number\">×1</text>\r\n\t\t\t\t\t\t<text class=\"MP_total\">-&nbsp;¥{{orderInfo[0].couponPrice}}</text>\r\n\t\t\t\t\t</view> -->\r\n\r\n\t\t\t\t\t<!-- <view class=\"MP_cost\">\r\n\t\t\t\t\t\t<text class=\"MP_total\">共计&nbsp;¥{{orderInfo[0].orderActualPayment}}</text>\r\n\t\t\t\t\t</view> -->\r\n\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"jdticon icon-xia\" style=\"padding: 24upx 0upx; text-align: center; margin-top: 64upx;\" @click=\"hide(0)\"\r\n\t\t\t\t :hidden=\"hiddenValues==1\"></view>\r\n\t\t\t\t<view class=\"jdticon icon-shang\" style=\"padding: 24upx 0upx; text-align: center; margin-top: 64upx;\" @click=\"hide(1)\"\r\n\t\t\t\t :hidden=\"hiddenValues==0\"></view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"MP_information2\">\r\n\t\t\t\t<view class=\"MP_optionBar\">\r\n\t\t\t\t\t<text class=\"Mp-icon jdticon icon-weixinzhifu\"></text>\r\n\t\t\t\t\t<text class=\"Mp_title\">微信</text>\r\n\t\t\t\t\t<radio class=\"Mp_box\" :checked=\"channeIndex===0\" :color=\"'#36cb59'\" @click=\"Selection\"></radio>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"MP_information2\" v-if=\"false\">\r\n\t\t\t\t<view class=\"MP_optionBar\">\r\n\t\t\t\t\t<text class=\"Mp-icon jdticon icon-alipay\"></text>\r\n\t\t\t\t\t<text class=\"Mp_title\">支付宝</text>\r\n\t\t\t\t\t<radio class=\"Mp_box\" :checked=\"channeIndex===1\" :color=\"'#01aaef'\" @click=\"Selection\"></radio>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"MP_information3\" @click=\"payment\">支付{{totalPrice}}元\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport $KyInterface from \"@/common/Ctky.js\"\r\n\timport utils from \"@/pages_CTKY/components/CTKY/shoyu-date/utils.filter.js\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcountDownDate: 120, //倒计时时间\r\n\t\t\t\tutils: utils,\r\n\t\t\t\tuserInfo: [], //用户信息\r\n\t\t\t\thiddenValues: '0', //隐藏状态值\r\n\t\t\t\tchannel: [{\r\n\t\t\t\t\tname: '微信'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '支付宝'\r\n\t\t\t\t}],\r\n\t\t\t\tinsurance: '', //保险\r\n\t\t\t\tisInsurance: '', //是否有保险\r\n\t\t\t\tinsuredPrice: '',//保险价格\r\n\t\t\t\tchanneIndex: 0, //选择支付方式\r\n\t\t\t\torderInfo: [], //订单数据\r\n\t\t\t\tpassengerInfo: [], //乘车人信息\r\n\t\t\t\tidNameTypeStr: '', //乘车人信息字符串（发送请求需要）（小叶接口）\r\n\t\t\t\tticketNum: '0', //总票数\r\n\t\t\t\tadultNum: '0', //成人数量\r\n\t\t\t\tchildrenNum: '0', //儿童数量\r\n\t\t\t\tfreeTicketNum: '0',//免童\r\n\t\t\t\tadultTotalPrice: '', //成人总价\r\n\t\t\t\tchildrenTotalPrice: '', //儿童总价\r\n\t\t\t\ttotalPrice: '0', //总价格\r\n\t\t\t\tpaymentData: [], //保存支付参数\r\n\t\t\t\ttimer: '', //定时器数据\r\n\t\t\t\tisPayEnable: false, //当前是否可以点击支付\r\n\t\t\t\torderNum: '', //订单编号\r\n\t\t\t\tticketInfo: [],\r\n\t\t\t\tspecialStartStation: '', //定制班车上车点\r\n\t\t\t\tspecialEndStation: '', //定制班车下车点\r\n\t\t\t\ttickettype: '', //班车类型\r\n\t\t\t\tctkyOpenID: '',\r\n\t\t\t\tweixinOpenId:'',\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function(param) {\r\n\t\t\t// console.log(param)\r\n\t\t\tvar that = this;\r\n\t\t\tthat.ticketInfo = JSON.parse(param.array);\r\n\t\t\t//定制班车上车点\r\n\t\t\tthat.specialStartStation = that.ticketInfo.getOnPoint;\r\n\t\t\t//定制班车下车点\r\n\t\t\tthat.specialEndStation = that.ticketInfo.getOffPoint;\r\n\t\t\t//班车类型\r\n\t\t\tthat.tickettype = that.ticketInfo.shuttleType;\r\n\r\n\t\t\tuni.showLoading({\r\n\t\t\t    title: '正在下单...'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthat.totalPrice = that.ticketInfo.totalPrice;//总价格\r\n\t\t\tthat.insuredPrice = that.ticketInfo.insuredPrice;//保险价格\r\n\t\t\tif (that.ticketInfo.isInsurance == 1) {\r\n\t\t\t\tthat.insurance = '保险';\r\n\t\t\t\tthat.isInsurance = true;\r\n\t\t\t} else {\r\n\t\t\t\tthat.insurance = '';\r\n\t\t\t\tthat.isInsurance = false;\r\n\t\t\t}\r\n\t\t\t//读取车票信息\r\n\t\t\tthis.getTickerInfo();\r\n\t\t\t//读取用户信息\r\n\t\t\tthis.getUserInfo();\r\n\t\t\t\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearInterval(this.timer);\r\n\t\t},\r\n\t\t//--------------------------监听页面返回--------------------------\r\n\t\tonBackPress(options) {\r\n\t\t\tvar that = this;\r\n\t\t\t// console.log('from:' + options.from);\r\n\t\t\tclearInterval(that.timer);\r\n\t\t\tif (options.from == 'backbutton') {\r\n\t\t\t\t// console.log('that.timer', that.timer);\r\n\t\t\t\tif (that.timer) {\r\n\t\t\t\t\tclearInterval(that.timer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//--------------------------读取车票信息--------------------------\r\n\t\t\tgetTickerInfo() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t//读取车票信息\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'ticketDate',\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\tthat.orderInfo = data.data;\r\n\t\t\t\t\t\tconsole.log('订单数据', that.orderInfo)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取信息失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------读取用户信息--------------------------\r\n\t\t\tgetUserInfo() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t//读取用户ID\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'userInfo',\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\tthat.userInfo = data.data;\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tthat.weixinOpenId = data.data.openId_xcx;\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t//读取乘车人信息\r\n\t\t\t\t\t\tthat.getPassengerInfo();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//-------------------------------时间转换-------------------------------\r\n\t\t\tturnDate(date) {\r\n\t\t\t\tif (date) {\r\n\t\t\t\t\tvar setTime = date.replace('T', ' ');\r\n\t\t\t\t\treturn setTime;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//--------------------------读取乘车人信息--------------------------\r\n\t\t\tgetPassengerInfo() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t//读取乘车人信息\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'passengerList',\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\tthat.passengerInfo = data.data;\r\n\t\t\t\t\t\tif (that.passengerInfo.length > 0) {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < that.passengerInfo.length; i++) {\r\n\t\t\t\t\t\t\t\tvar type = '';\r\n\t\t\t\t\t\t\t\tif (data.data[i].userType == '免票儿童') {\r\n\t\t\t\t\t\t\t\t\ttype = 0;\r\n\t\t\t\t\t\t\t\t} else if (data.data[i].userType == '成人') {\r\n\t\t\t\t\t\t\t\t\ttype = 2;\r\n\t\t\t\t\t\t\t\t}else if (data.data[i].userType == '半票儿童') {\r\n\t\t\t\t\t\t\t\t\ttype = 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//拼接id name type\r\n\t\t\t\t\t\t\t\tthat.idNameTypeStr += data.data[i].userCodeNum + ',' + data.data[i].userName + ',' + type + '|';\r\n\r\n\t\t\t\t\t\t\t\tthat.ticketNum++;\r\n\t\t\t\t\t\t\t\t//把儿童票筛选出来\r\n\t\t\t\t\t\t\t\tif (that.passengerInfo[i].userType == '半票儿童') {\r\n\t\t\t\t\t\t\t\t\tthat.childrenNum++;\r\n\t\t\t\t\t\t\t\t} else if (that.passengerInfo[i].userType == '成人'){\r\n\t\t\t\t\t\t\t\t\tthat.adultNum++;\r\n\t\t\t\t\t\t\t\t}else if(that.passengerInfo[i].userType == '免票儿童'){\r\n\t\t\t\t\t\t\t\t\tthat.freeTicketNum++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//把最后面的'｜'去掉\r\n\t\t\t\t\t\t\tthat.idNameTypeStr = that.idNameTypeStr.substring(0, that.idNameTypeStr.length - 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//-------------------------------读取用户openID-------------------------------\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tthat.getOpenID();\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//-------------------------------下单-------------------------------\r\n\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\tthat.getOrder();\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取信息失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------读取公众号openid--------------------------\r\n\t\t\tgetOpenID() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'scenicSpotOpenId',\r\n\t\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\t\tthat.ctkyOpenID = response.data\r\n\t\t\t\t\t\t//等待读取用户缓存成功之后再请求接口数据\r\n\t\t\t\t\t\tthat.getOrder();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(response) {\r\n\t\t\t\t\t\tthat.ctkyOpenID = response.data\r\n\t\t\t\t\t\t// that.getOrder();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------隐藏操作--------------------------\r\n\t\t\thide(e) {\r\n\t\t\t\tif (e == 0) {\r\n\t\t\t\t\tthis.hiddenValues = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.hiddenValues = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//--------------------------同意购买-点击事件--------------------------\r\n\t\t\tSelection: function() {\r\n\t\t\t\tif (this.channeIndex == 0) {\r\n\t\t\t\t\tthis.channeIndex = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.channeIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//--------------------------数组提取--------------------------\r\n\t\t\tscreenUser: function() {\r\n\t\t\t\tlet adult = this.orderInfo.filter(item => {\r\n\t\t\t\t\treturn item.userType == '成人';\r\n\t\t\t\t})\r\n\t\t\t\tlet children = this.orderInfo.filter(item => {\r\n\t\t\t\t\treturn item.userType == '儿童';\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.adultIndex = adult.length;\r\n\t\t\t\tthis.childrenIndex = children.length;\r\n\t\t\t\tthis.adultTotalPrice = adult.length * this.orderInfo[0].ticketAdultPrice;\r\n\t\t\t\tthis.childrenTotalPrice = children.length * this.orderInfo[0].ticketChildPrice;\r\n\t\t\t},\r\n\t\t\t//--------------------------下单--------------------------\r\n\t\t\tgetOrder: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar timer = null;\r\n\t\t\t\tvar setTime = that.orderInfo.setTime.replace('T', ' ');\r\n\t\t\t\tvar openId = '';\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\topenId = that.weixinOpenId;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\topenId = that.ctkyOpenID;\r\n\t\t\t\t// #endif\r\n\t\t\t\tvar companyCode = '';\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tcompanyCode = $KyInterface.KyInterface.systemName.systemNameNPH5;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tcompanyCode = $KyInterface.KyInterface.systemName.systemNameNPAPP;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tcompanyCode = $KyInterface.KyInterface.systemName.systemNameNPH5;\r\n\t\t\t\t// #endif\r\n\t\t\t\t//--------------------------发起下单请求-----------------------\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$KyInterface.KyInterface.Ky_PaymentUrl.Url,\r\n\t\t\t\t\tmethod:$KyInterface.KyInterface.Ky_PaymentUrl.method,\r\n\t\t\t\t\t// header:$KyInterface.KyInterface.Ky_PaymentUrl.header,\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcompanyCode: companyCode,\r\n\t\t\t\t\t\tclientID: that.userInfo.userId, //用户ID\r\n\t\t\t\t\t\tclientName: that.userInfo.nickname, //用户名\r\n\t\t\t\t\t\tphoneNumber: that.userInfo.phoneNumber, //手机号码\r\n\r\n\t\t\t\t\t\tscheduleCompanyCode: that.orderInfo.scheduleCompanyCode, //班次代码\r\n\t\t\t\t\t\texecuteScheduleID: that.orderInfo.executeScheduleID, //班次ID\r\n\t\t\t\t\t\tstartSiteID: that.orderInfo.startSiteID, //上车点ID\r\n\t\t\t\t\t\tendSiteID: that.orderInfo.endSiteID, //下车点ID\r\n\t\t\t\t\t\tstartSiteName: that.orderInfo.startStaion, //起点站\r\n\t\t\t\t\t\tendSiteName: that.orderInfo.endStation, //终点站\r\n\t\t\t\t\t\tpriceID: that.orderInfo.priceID, //价格ID\r\n\t\t\t\t\t\tsetOutTime: setTime, //发车时间\r\n\t\t\t\t\t\tinsuredPrice: that.insuredPrice, //保险价格\r\n\t\t\t\t\t\tcarType: that.orderInfo.shuttleType, //班车类型\r\n\r\n\t\t\t\t\t\tfullTicket: that.adultNum, //全票人数\r\n\t\t\t\t\t\thalfTicket: that.childrenNum, //半票人数\r\n\t\t\t\t\t\tcarryChild: that.freeTicketNum, //携童人数\r\n\t\t\t\t\t\tidNameType: that.idNameTypeStr, //乘车人信息\r\n\t\t\t\t\t\tinsured: that.isInsurance, //是否选择了保险\r\n\t\t\t\t\t\topenId: openId,//oI1cA0k7cBdeZ_jA0fd_OdEO6kls\r\n\t\t\t\t\t\ttotalPrice: that.totalPrice, //总价格\r\n\t\t\t\t\t\tpayParameter: '', //不需要的参数，传空\r\n\r\n\t\t\t\t\t\tgetOnPoint: that.specialStartStation, //定制班车上车点\r\n\t\t\t\t\t\tgetOffPoint: that.specialEndStation, //定制班车下车点\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('下单返回结果',res)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\t\tif (res.data.status == true) {\r\n\t\t\t\t\t\t\t\tthat.orderNum = res.data.data;\r\n\t\t\t\t\t\t\t\tthat.getTicketPaymentInfo(res.data.data);\r\n\t\t\t\t\t\t\t} else if (res.data.status == false) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tcontent: res.data.msg,\r\n\t\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '网络错误',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log('失败', res);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------获取车票支付参数--------------------------\r\n\t\t\tgetTicketPaymentInfo: function(orderNumber) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tconsole.log(orderNumber)\r\n\t\t\t\tvar timer = null;\r\n\t\t\t\tthat.timer = timer;\r\n\t\t\t\ttimer = setInterval(function() {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:$KyInterface.KyInterface.Ky_getTicketPaymentInfo.Url,\r\n\t\t\t\t\t\tmethod:$KyInterface.KyInterface.Ky_getTicketPaymentInfo.method,\r\n\t\t\t\t\t\t// header:$KyInterface.KyInterface.Ky_getTicketPaymentInfo.header,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t//订单编号\r\n\t\t\t\t\t\t\torderNumber: orderNumber\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log('支付参数',res);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\t\t\tif (res.data.status == true) {\r\n\t\t\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar msgArray = JSON.parse(res.data.msg);\r\n\t\t\t\t\t\t\t\t\tconsole.log(msgArray)\r\n\t\t\t\t\t\t\t\t\tif (msgArray.oldState == '结束') {\r\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: msgArray.message,\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t} else if (msgArray.oldState == '支付系统申请支付订单') {\r\n\t\t\t\t\t\t\t\t\t\tthat.paymentData = msgArray;\r\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: '请在2分钟内完成支付',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.payment();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (res.data.status == false) {\r\n\t\t\t\t\t\t\t\t\t//回调失败，取消定时器\r\n\t\t\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\tconsole.log('失败',res);\r\n\t\t\t\t\t\t\t//回调失败，取消定时器\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 3000)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//--------------------------调起支付--------------------------\r\n\t\t\tpayment: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tWeixinJSBridge.invoke('getBrandWCPayRequest', {\r\n\t\t\t\t\t\"appId\": that.paymentData.jsapi.AppId, //公众号名称，由商户传入\r\n\t\t\t\t\t\"timeStamp\": that.paymentData.jsapi.TimeStamp, //时间戳\r\n\t\t\t\t\t\"nonceStr\": that.paymentData.jsapi.NonceStr, //随机串\r\n\t\t\t\t\t\"package\": that.paymentData.jsapi.Package, //扩展包\r\n\t\t\t\t\t\"signType\": that.paymentData.jsapi.SignType, //微信签名方式:MD5\r\n\t\t\t\t\t\"paySign\": that.paymentData.jsapi.PaySign //微信签名\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tif (res.err_msg == \"get_brand_wcpay_request:ok\") {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.getTicketPaymentInfo_ticketIssue(that.orderNum);\r\n\t\t\t\t\t} else if (res.err_msg == \"get_brand_wcpay_request:cancel\") {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '您取消了支付，请重新支付',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (res.err_msg == \"get_brand_wcpay_request:faile\") {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '支付失败，请重新支付',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// location.href = \"/Coach/GetCoach\";\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\torderInfo: {\r\n\t\t\t\t\t\tappid: that.paymentData.jsapi.AppId,\r\n\t\t\t\t\t\ttimestamp: that.paymentData.jsapi.TimeStamp,\r\n\t\t\t\t\t\tnoncestr: that.paymentData.jsapi.NonceStr,\r\n\t\t\t\t\t\tpackage: 'Sign=WXPay',\r\n\t\t\t\t\t\tsign: that.paymentData.jsapi.PaySign,\r\n\t\t\t\t\t\tpartnerid: that.paymentData.jsapi.PartnerId,\r\n\t\t\t\t\t\tprepayid: that.paymentData.jsapi.PrepayId,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t\t// \ttitle: '提示',\r\n\t\t\t\t\t\t// \tcontent: res,\r\n\t\t\t\t\t\t// \tshowCancel: false\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (res.errMsg == 'requestPayment:ok') { //成功\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthat.getTicketPaymentInfo_ticketIssue(that.orderNum);\r\n\t\t\t\t\t\t} else if (res.errMsg == 'requestPayment:fail errors') { //错误\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '支付失败，请重新支付',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.errMsg == 'requestPayment:fail canceled') { //用户取消\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '您取消了支付',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.errMsg == 'requestPayment:fail errors') { //错误\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '支付失败，请重新支付',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.errMsg == 'requestPayment:fail') { //用户取消\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '您取消了支付',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\ttimeStamp:that.paymentData.jsapi.TimeStamp,\r\n\t\t\t\t\tnonceStr:that.paymentData.jsapi.NonceStr,\r\n\t\t\t\t\tpackage:that.paymentData.jsapi.Package,\r\n\t\t\t\t\tsignType:that.paymentData.jsapi.SignType,\r\n\t\t\t\t\tpaySign:that.paymentData.jsapi.PaySign,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.errMsg == \"requestPayment:ok\") {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t    title: '加载中...'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\tthat.getTicketPaymentInfo_ticketIssue(that.orderNum);\r\n\t\t\t\t\t\t\t},4000)\r\n\t\t\t\t\t\t}else if (res.errMsg == \"requestPayment:fail cancel\") {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.showToast(\"您取消了支付，请重新支付\")\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t}else if (res.errMsg == \"requestPayment:fail errors\") {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.showToast(\"支付失败，请重新支付\")\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.errMsg == \"requestPayment:fail cancel\") {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.showToast(\"您取消了支付，请重新支付\")\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t}else if (res.errMsg == \"requestPayment:fail errors\") {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tthat.showToast(\"支付失败，请重新支付\")\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthat.showToast(\"支付失败\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tshowToast: function(msg, icon = 'none') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: msg,\r\n\t\t\t\t\ticon: icon\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------成功之后重新获取车票支付参数--------------------------\r\n\t\t\tgetTicketPaymentInfo_ticketIssue: function(orderNumber) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar timer = null;\r\n\t\t\t\tthat.timer = timer;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '检索订单是否支付...'\r\n\t\t\t\t});\r\n\t\t\t\ttimer = setInterval(function() {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:$KyInterface.KyInterface.Ky_getTicketPaymentInfo.Url,\r\n\t\t\t\t\t\tmethod:$KyInterface.KyInterface.Ky_getTicketPaymentInfo.method,\r\n\t\t\t\t\t\t// header:$KyInterface.KyInterface.Ky_getTicketPaymentInfo.header,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\torderNumber: orderNumber,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log('支付参数返回数据', res);\r\n\t\t\t\t\t\t\tif (res.data.data == '订票成功') {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '出票成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: './CTKYPaySuccess'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t//回调失败，取消定时器\r\n\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 3000)\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground: #F5F5F5;\r\n\t\tpadding-bottom: 40upx;\r\n\t}\r\n\r\n\t//背景图样式\r\n\t.ob_background {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 320upx;\r\n\r\n\t\timage {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t//整体容器样式\r\n\t.cover-container {\r\n\t\tposition: relative;\r\n\t\ttop: 30upx;\r\n\t\tpadding: 32upx 30upx;\r\n\t}\r\n\r\n\t//公共样式 - 适用多个数据框\r\n\t.MP_information1 {\r\n\t\tborder-radius: 16upx;\r\n\t\tbackground: #FFFFFF;\r\n\t\tpadding: 44upx 32upx;\r\n\t\tpadding-bottom: 24upx;\r\n\t\tfont-size: 32upx;\r\n\t\tbox-shadow: 0px 0.2px 0px #aaa;\r\n\r\n\t\t.MP_title {\r\n\t\t\tfont-size: 34upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tfont-weight: bold;\r\n\t\t\t// margin-top: 20upx;\r\n\t\t}\r\n\r\n\t\t.MP_text {\r\n\t\t\tcolor: #888;\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tmargin-top: 20upx;\r\n\t\t\tdisplay: block; // 让字体换行\r\n\t\t}\r\n\t}\r\n\r\n\t//公共样式2 - 适用单选框\r\n\t.MP_information2 {\r\n\t\tborder-radius: 16upx;\r\n\t\tbackground: #FFFFFF;\r\n\t\tpadding: 36upx 32upx;\r\n\t\tfont-size: 32upx;\r\n\t\tbox-shadow: 0px 0.2px 0px #aaa;\r\n\t\tmargin-top: 24upx;\r\n\r\n\t\t.kj {\r\n\t\t\tfont-size: 34upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tmargin-top: 8upx;\r\n\t\t}\r\n\r\n\t\t.MP_text {\r\n\t\t\tfont-size: 26upx;\r\n\t\t\tmargin-top: 20upx;\r\n\t\t\tdisplay: block; // 让字体换行\r\n\t\t}\r\n\r\n\t\t//选项框样式\r\n\t\t.MP_optionBar {\r\n\t\t\t.Mp_title {\r\n\t\t\t\tfont-size: 32upx;\r\n\t\t\t\tmargin-left: 20upx;\r\n\t\t\t}\r\n\r\n\t\t\t.Mp_text {\r\n\t\t\t\tmargin-top: 6upx;\r\n\t\t\t\tfloat: right;\r\n\t\t\t\tfont-size: 28upx;\r\n\t\t\t\tcolor: #f85e52;\r\n\t\t\t}\r\n\r\n\t\t\t.Mp_textBlue {\r\n\t\t\t\tmargin-left: 16upx;\r\n\t\t\t\tfont-size: 26upx;\r\n\t\t\t\tcolor: #3EABFC;\r\n\t\t\t}\r\n\r\n\t\t\t.Mp_box {\r\n\t\t\t\tfloat: right;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tbottom: 6upx;\r\n\t\t\t\tright: -12upx;\r\n\t\t\t}\r\n\r\n\t\t\t.Mp_icon {\r\n\t\t\t\twidth: 100upx;\r\n\t\t\t\tfont-size: 52upx;\r\n\t\t\t}\r\n\r\n\t\t\t.icon-weixinzhifu {\r\n\t\t\t\tcolor: #36cb59;\r\n\t\t\t}\r\n\r\n\t\t\t.icon-alipay {\r\n\t\t\t\tcolor: #01aaef;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//公共样式3 - 适用按钮\r\n\t.MP_information3 {\r\n\t\tpadding: 24upx 0;\r\n\t\tborder-radius: 64upx;\r\n\t\tbackground: #FF6600;\r\n\t\ttext-align: center;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 38upx;\r\n\t\tfont-weight: 400;\r\n\t\tbox-shadow: 0px 0.2px 0px #aaa;\r\n\t\tmargin-top: 80upx;\r\n\t}\r\n\r\n\t//使用时间/费用详情\r\n\t.MP_selectionDate {\r\n\t\tmargin-top: 24upx;\r\n\t\tmargin-bottom: 24upx;\r\n\t\tborder-top: 1px #F5F5F5 dashed;\r\n\r\n\t\t.MP_title {\r\n\t\t\tmargin-top: 24upx;\r\n\t\t\tfont-size: 34upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\r\n\t\t.MP_text {\r\n\t\t\tcolor: #888;\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tdisplay: block; // 让字体换行\r\n\t\t}\r\n\r\n\t\t.MP_cost {\r\n\t\t\tdisplay: block; // 让字体换行\r\n\t\t\tmargin: 20upx 0;\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tcolor: #888;\r\n\r\n\t\t\t.MP_number {\r\n\t\t\t\tmargin-left: 16upx;\r\n\t\t\t}\r\n\r\n\t\t\t.MP_userCost {\r\n\t\t\t\tfloat: right;\r\n\t\t\t}\r\n\r\n\t\t\t.MP_total {\r\n\t\t\t\tcolor: #f85e52;\r\n\t\t\t\tfloat: right;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 出行人信息\r\n\t.MP_userInformation {\r\n\t\tmargin-top: 32upx;\r\n\r\n\t\t.Mp_sex {\r\n\t\t\tmargin-left: 24upx;\r\n\t\t}\r\n\r\n\t\t.Mp_text {\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tdisplay: block;\r\n\t\t\tcolor: #888;\r\n\t\t\tmargin-top: 20upx;\r\n\t\t}\r\n\r\n\t\t.Mp_square {\r\n\t\t\tmargin-left: 24upx;\r\n\t\t\tpadding: 2upx 20upx;\r\n\t\t\tbackground: #3DABFC;\r\n\t\t\tfont-size: 26upx;\r\n\t\t\tcolor: #fff;\r\n\t\t\ttext-align: center;\r\n\t\t\tborder-radius: 8upx;\r\n\t\t}\r\n\r\n\t\t.Mp_delete {\r\n\t\t\tfloat: right;\r\n\t\t\tcolor: #f85e52;\r\n\t\t\tfont-size: 34upx;\r\n\t\t}\r\n\r\n\t\t.Mp_addTo {\r\n\t\t\tfloat: left;\r\n\t\t\tfont-size: 30upx;\r\n\t\t\tmargin-left: 64upx;\r\n\t\t\twidth: 200upx;\r\n\t\t}\r\n\r\n\t\t.Mp_Selection {\r\n\t\t\tfont-size: 30upx;\r\n\t\t\tmargin-right: 64upx;\r\n\t\t\twidth: 200upx;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPayment.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPayment.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594278264132\n      var cssReload = require(\"D:/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}